
++++++++++++RUN COMMANDS++++++++++++++

Start client
> cd client-app
> npm start

RUN API, VS Code
- Under Terminal, using dotnet cli
- Only works inside the context of the startup project, error in solution level even with -p switch
> cd API
> dotnet watch run

- Specify startup project
- Run:
> dotnet run -p API/

Recommend dotnet cli in creating Projects

Check versions:
> dotnet --info

Help for dotnet cli
> dotnet -h
> dotnet new -h
> dotnet new <shortname>

...

Install packages (must be same as netcore version)
- open command shell (ctrl+shift+p)
- Nuget Package Manager: Add Package
- Add to Project
- Restore pop-up window

++++++++++++EF Codes ADD MIGRATION++++++++++++++
!!!IN SOLUTION LEVEL
!specify -p is the persistence project
!specify -s is the startup project
> dotnet ef migrations add InitialCreate -p Persistence/ -s API/

!updates to the latest migration if no migration is specified
> dotnet ef database update <migration>

!create new migration for seed
-p for datacontext project
-s startup project
> dotnet ef migrations add SeedValues -p Persistence/ -s API/

++++++++++++RESETTING DATABASE++++++++++++++
1. Inside VS Code Terminal Window, inside solution folder

2. Drop database
- Specify persistence project and startup project

dotnet ef database drop -p Persistence/ -s API/

3. Re run Api since we have migration setup in startup
dotnet watch run

++++++++++++POSTMAN FEATURES++++++++++++++
1. Variables
- under collections > edit
- rightmost tab "Parameters"
- set value for parameter "url"
- usage: {{url}}/api/activities

2. Creating Collections
https://learning.getpostman.com/docs/postman/collections/intro_to_collections/

++++++++++++ERRORS++++++++++++++

Error in packages with 3.0.0 and project template defaulting to netstandard2.0
For projects Persistence, Application

Solution: Manually change Projects to target netstandard2.1

<PropertyGroup>
	<TargetFramework>netstandard2.1</TargetFramework>
</PropertyGroup>

...

Error running 
> dotnet ef migrations add InitalCreate -p Persistence/ -s API/

Could not execute because the specified command or file was not found.
Possible reasons for this include:
  * You misspelled a built-in dotnet command.
  * You intended to execute a .NET Core program, but dotnet-ef does not exist.

Solution: https://stackoverflow.com/questions/56862089/cannot-find-command-dotnet-ef
dotnet tool install --global dotnet-ef

...

Error
Your startup project 'API' doesn't reference Microsoft.EntityFrameworkCore.Design. This package is required for the Entity Framework 
Core Tools to work. Ensure your startup project is correct, install the package, and try again.

...

Error Node not running
https://medium.com/appseed-io/how-to-run-multiple-versions-of-node-js-with-nvm-for-windows-ffbe5c7a2b47

- Powershell
- Check list of node versions
> nvm list
12.12.0

> nvm use 12.12.0

- Check if node is running
> node -v
v12.12.0

...

Issues with Sqlite generating Guid as blob
https://www.connectionstrings.com/sqlite-net-provider/store-guid-as-text/
https://stackoverflow.com/questions/18821265/proper-way-to-store-guid-in-sqlite

suggested to add value in ConnectionString
Data Source=c:\mydb.db;Version=3;BinaryGUID=False;

as of Microsoft.EntityFrameworkCore.Sqlite" Version="3.0.0" Guid is being migrated to sqlite as string

https://stackoverflow.com/questions/52684458/updating-entity-in-ef-core-application-with-sqlite-gives-dbupdateconcurrencyexce

....

Property 'activity' has no initializer and is not definitely assigned in the constructor.ts(2564)
https://stackoverflow.com/questions/49699067/property-has-no-initializer-and-is-not-definitely-assigned-in-the-construc
- Set to null upon declaration
@observable activity: IActivity | null = null;

++++++++++++DEBUGGING IN VS CODE++++++++++++++
1. Verify in .vscode/launch.json
{
    "name": ".NET Core Attach",
    "type": "coreclr",
    "request": "attach",
    "processId": "${command:pickProcess}"
}

2. In Debug Tab, select .Net Core Attach in dropdown
- .Net Core Launch will start a new instance

3. Debug. Search for Api.dll, api.exe

4. Note on [ApiController] attribute
- This throws its own errors hence breakpoitn might not trigger
- comment out [ApiController] for verification

5. Verify values under Variables/Locals/


!!!!Error
- On submitting ActivityForm
react-dom.development.js:12466 Warning: componentWillMount has been renamed, and is not recommended for use. See https://fb.me/react-unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 17.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.

Please update the following components: Uncontrolled(DateTimePicker)

react-dom.development.js:12466 Warning: componentWillReceiveProps has been renamed, and is not recommended for use. See https://fb.me/react-unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://fb.me/react-derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 17.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.

Please update the following components: Uncontrolled(DateTimePicker)

!!Error
Unhandled Rejection (Error): [mobx] Since strict-mode is enabled, changing observed observable values outside actions is not allowed. 
Please wrap the code in an `action` if this change is intended. 
Tried to modify: ActivityStore@4.activityRegistry.4102d545-2a97-411f-809b-9fae31e006da.time0

/client-app/src/app/models/activity.ts:27
  24 | 
  25 |  constructor(init?: IActivityFormValues) {
  26 |    if (init && init.date) {
> 27 |      init.time = init.date;
     | ^  28 |    }
  29 |    Object.assign(this, init);
  30 |  }
View compiled
(anonymous function)
/client-app/src/features/activities/form/ActivityForm.tsx:59
  56 | useEffect(() => {
  57 |   if (match.params.id) {
  58 |     setLoading(true);
> 59 |     loadActivity(match.params.id)
     | ^  60 |       .then(activity => setActivity(new ActivityFormValues(activity)))
  61 |       .finally(() => setLoading(false));
  62 |   }


++++++++++++TODO++++++++++++++

Create Generic Notes Repository
1. EF
2. npm

Apply API Best Practices
1. Async
2. Naming methods
3. Attributes
4. Returning error codes (extension method?)
5. Compare Api Architecture (No MediatR) in the Angular version

Front end
1. Create interfaces/classes for Api objects
- Sample was created Chapter 5


